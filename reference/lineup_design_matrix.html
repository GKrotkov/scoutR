<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Lineup Design Matrix — lineup_design_matrix • scoutR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Lineup Design Matrix — lineup_design_matrix"><meta name="description" content="Computes the lineup design matrix (indicator variables one-hot encoding each
robot's presence in a match). When used to fit a linear regression through
the intercept with scores as the response, the resulting coefficients
are equal to OPR. We use the nomenclature &quot;lineups&quot; to reflect NBA &quot;lineup
data&quot; which is related to the development of OPR/Calculated Contribution."><meta property="og:description" content="Computes the lineup design matrix (indicator variables one-hot encoding each
robot's presence in a match). When used to fit a linear regression through
the intercept with scores as the response, the resulting coefficients
are equal to OPR. We use the nomenclature &quot;lineups&quot; to reflect NBA &quot;lineup
data&quot; which is related to the development of OPR/Calculated Contribution."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scoutR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/intro.html">Intro to scoutR</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GKrotkov/tbaR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Lineup Design Matrix</h1>
      <small class="dont-index">Source: <a href="https://github.com/GKrotkov/tbaR/blob/master/R/scoutR.R" class="external-link"><code>R/scoutR.R</code></a></small>
      <div class="d-none name"><code>lineup_design_matrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes the lineup design matrix (indicator variables one-hot encoding each
robot's presence in a match). When used to fit a linear regression through
the intercept with scores as the response, the resulting coefficients
are equal to OPR. We use the nomenclature "lineups" to reflect NBA "lineup
data" which is related to the development of OPR/Calculated Contribution.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lineup_design_matrix</span><span class="op">(</span><span class="va">matches</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-matches">matches<a class="anchor" aria-label="anchor" href="#arg-matches"></a></dt>
<dd><p>Dataframe of matches like output by event_matches</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Assumes match order is irrelevant. Casts the final output to a
data.frame because the `lm` function expects a data.frame. Returns blue
alliances as a block, and then red alliances. We call this function the
"design matrix" because it only includes the indicator variables, and not
any of the responses.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="event_matches.html">event_matches</a></span><span class="op">(</span><span class="st">"2023mil"</span>, match_type <span class="op">=</span> <span class="st">"qual"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">matches</span> <span class="op">&lt;-</span> <span class="va">matches</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">matches</span><span class="op">$</span><span class="va">match_number</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu">lineup_design_matrix</span><span class="op">(</span><span class="va">matches</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">design</span><span class="op">$</span><span class="va">score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">matches</span><span class="op">$</span><span class="va">blue_score</span>, <span class="va">matches</span><span class="op">$</span><span class="va">red_score</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">score</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">design</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="co"># retrieves OPRs</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = score ~ 0 + ., data = design)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min      1Q  Median      3Q     Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -49.747  -8.596   1.368  10.991  36.460 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc25     46.902      6.551   7.159 1.96e-11 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc135    43.027      6.528   6.591 4.62e-10 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc176    66.202      6.564  10.085  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc316    58.238      6.565   8.871 6.88e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc319    61.239      6.520   9.393  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc360    38.305      6.527   5.869 2.06e-08 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc384    58.890      6.541   9.004 2.99e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc469    55.691      6.543   8.511 6.42e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc587    56.617      6.587   8.595 3.83e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc597    50.616      6.529   7.753 6.27e-13 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc604    64.133      6.531   9.820  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc694    62.581      6.579   9.512  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc910    50.573      6.576   7.691 9.03e-13 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc930    69.738      6.570  10.615  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc987    55.354      6.547   8.455 9.10e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1072   45.461      6.245   7.279 9.88e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1218   47.835      6.473   7.390 5.23e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1241   47.527      6.188   7.681 9.59e-13 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1414   52.912      6.508   8.131 6.54e-14 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1506   55.372      6.465   8.564 4.63e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1599   49.209      6.544   7.520 2.46e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1683   54.401      6.646   8.186 4.69e-14 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1745   57.355      6.453   8.888 6.18e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1923   65.649      6.532  10.050  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1983   38.904      6.551   5.939 1.44e-08 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2230   50.020      6.508   7.686 9.32e-13 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2240   49.103      6.474   7.585 1.68e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2399   68.519      6.465  10.598  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2403   37.227      6.478   5.747 3.79e-08 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2489   27.173      6.543   4.153 5.05e-05 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2539   67.546      6.240  10.824  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2635   33.435      6.557   5.099 8.56e-07 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2638   38.788      6.609   5.869 2.05e-08 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2656   29.805      6.567   4.539 1.03e-05 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2974   63.727      6.553   9.725  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3374   42.786      6.522   6.560 5.46e-10 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3604   56.358      6.634   8.495 7.10e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3620   56.670      6.554   8.647 2.78e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3655   64.404      6.561   9.817  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3668   48.777      6.469   7.540 2.19e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3679   49.814      6.460   7.712 7.99e-13 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3683   56.138      6.487   8.653 2.67e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3937   64.619      6.591   9.804  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4020   42.248      6.454   6.546 5.89e-10 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4039   61.401      6.548   9.377  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4122   30.500      6.528   4.673 5.79e-06 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4175   30.083      6.588   4.566 9.15e-06 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4561   48.074      6.611   7.271 1.03e-11 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4693   26.866      6.537   4.110 6.00e-05 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4779   47.749      6.538   7.304 8.59e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5024   40.905      6.482   6.311 2.08e-09 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5089   32.740      6.540   5.006 1.31e-06 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5152   56.095      6.524   8.598 3.75e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5409   61.325      6.539   9.378  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5411   49.298      6.570   7.503 2.72e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5419   44.193      6.567   6.729 2.17e-10 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5505   43.029      6.524   6.596 4.51e-10 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5618   29.989      6.633   4.521 1.11e-05 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5653   34.976      6.573   5.322 3.02e-07 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5895   56.393      6.528   8.638 2.93e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5913   39.685      6.487   6.118 5.72e-09 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5988   21.556      6.536   3.298  0.00117 ** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc6090   59.325      6.530   9.085  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc6352   33.084      6.240   5.302 3.31e-07 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc6420   49.047      6.536   7.505 2.69e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc6672   60.535      6.540   9.256  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc6823   58.039      6.589   8.808 1.02e-15 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc6865   37.529      6.515   5.761 3.54e-08 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc7018   32.699      6.541   4.999 1.35e-06 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc8576   41.346      6.570   6.293 2.28e-09 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9007   28.847      6.554   4.401 1.84e-05 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9008   27.898      6.585   4.237 3.61e-05 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9022   36.326      6.569   5.530 1.11e-07 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9075   32.940      6.584   5.003 1.33e-06 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9076   21.123      6.504   3.248  0.00139 ** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9125   45.637      6.546   6.971 5.66e-11 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9244   18.817      6.564   2.867  0.00464 ** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 18.68 on 181 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.9882,	Adjusted R-squared:  0.9832 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic: 197.4 on 77 and 181 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriel Krotkov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

