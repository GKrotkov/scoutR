<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Fit Event Linear Regression — fit_event_lr • scoutR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fit Event Linear Regression — fit_event_lr"><meta name="description" content="Performs a linear regression through the origin for a given event. With
default settings, this will compute OPR; cOPRs can be retrieved through
changing the `response` field."><meta property="og:description" content="Performs a linear regression through the origin for a given event. With
default settings, this will compute OPR; cOPRs can be retrieved through
changing the `response` field."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scoutR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/intro.html">Intro to scoutR</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GKrotkov/tbaR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Fit Event Linear Regression</h1>
      <small class="dont-index">Source: <a href="https://github.com/GKrotkov/tbaR/blob/master/R/scoutR.R" class="external-link"><code>R/scoutR.R</code></a></small>
      <div class="d-none name"><code>fit_event_lr.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Performs a linear regression through the origin for a given event. With
default settings, this will compute OPR; cOPRs can be retrieved through
changing the `response` field.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fit_event_lr</span><span class="op">(</span></span>
<span>  <span class="va">event_code</span>,</span>
<span>  match_type <span class="op">=</span> <span class="st">"qual"</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"score"</span>,</span>
<span>  w <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  flip_response_alliance <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-event-code">event_code<a class="anchor" aria-label="anchor" href="#arg-event-code"></a></dt>
<dd><p>TBA-legal event code (e.g. "2024paca")</p></dd>


<dt id="arg-match-type">match_type<a class="anchor" aria-label="anchor" href="#arg-match-type"></a></dt>
<dd><p>One of "qual", "playoff", or "all"</p></dd>


<dt id="arg-response">response<a class="anchor" aria-label="anchor" href="#arg-response"></a></dt>
<dd><p>The response variable of interest for the linear regression.
To compute regular OPR, pick "score". Component OPRs can be computed by
supplying a string with a different response.</p></dd>


<dt id="arg-w">w<a class="anchor" aria-label="anchor" href="#arg-w"></a></dt>
<dd><p>Numeric vector indicating the weights to apply to each row</p></dd>


<dt id="arg-flip-response-alliance">flip_response_alliance<a class="anchor" aria-label="anchor" href="#arg-flip-response-alliance"></a></dt>
<dd><p>(bool) if TRUE, uses the blue alliance
response for the red alliance design matrix and vice versa. This can be
useful for calculating foul contributions to the other alliance or defensive
metrics.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Fitted lm object; to retrieve coefficients call coefficients(fit)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Assumes that the event matches dataframe follows the convention
"(red/blue)_(response)" where (response) is the type of score we are
interested in computing an approximation contribution for.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">fit_event_lr</span><span class="op">(</span><span class="st">"2024paca"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = response ~ 0 + ., data = design, weights = w)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc117   frc144   frc325   frc340   frc379   frc578   frc677   frc695  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  17.350   20.790   30.720   20.948   20.630    5.232   11.324   27.089  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1126  frc1559  frc1708  frc1787  frc2013  frc2053  frc2172  frc2228  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  16.861   17.685   23.340   34.827    6.928   15.692   10.913   17.101  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2252  frc2399  frc2614  frc2638  frc2641  frc2656  frc3015  frc3181  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  24.981   17.446   24.605   14.414   17.629   17.003   35.502   16.758  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3201  frc3260  frc3484  frc3492  frc3504  frc3954  frc4027  frc4050  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  31.846   13.140   15.508    8.216   24.445   20.856   25.283    9.845  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4121  frc4145  frc4150  frc4611  frc4991  frc5413  frc5740  frc6834  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  30.092   14.035   21.774   28.150    9.623    9.992   12.281   20.959  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc7274  frc7515  frc8096  frc8393  frc8705  frc9004  frc9022  frc9139  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   9.332   13.019   11.734   -1.230    5.104    2.183   12.197   16.531  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9415  frc9475  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1.825   12.379  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">fit_event_lr</span><span class="op">(</span><span class="st">"2023mil"</span>, response <span class="op">=</span> <span class="st">"teleopGamePieceCount"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = response ~ 0 + ., data = design, weights = w)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   frc25   frc135   frc176   frc316   frc319   frc360   frc384   frc469  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   6.628    6.760    9.870    7.936    8.226    6.049    8.198    6.813  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc587   frc597   frc604   frc694   frc910   frc930   frc987  frc1072  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   7.432    6.642    8.614    8.052    6.293   10.372    8.312    6.334  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1218  frc1241  frc1414  frc1506  frc1599  frc1683  frc1745  frc1923  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   6.754    6.195    7.641    8.459    5.631    6.584    8.707    9.107  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1983  frc2230  frc2240  frc2399  frc2403  frc2489  frc2539  frc2635  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5.654    7.356    6.911    7.666    5.857    4.240    9.680    3.533  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2638  frc2656  frc2974  frc3374  frc3604  frc3620  frc3655  frc3668  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5.222    4.482    9.073    5.215    7.894    7.115    8.411    7.146  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3679  frc3683  frc3937  frc4020  frc4039  frc4122  frc4175  frc4561  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   6.170    8.915    8.959    5.717    8.550    3.585    3.729    7.009  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc4693  frc4779  frc5024  frc5089  frc5152  frc5409  frc5411  frc5419  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3.985    6.618    5.828    5.235    6.431    8.221    6.006    7.018  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5505  frc5618  frc5653  frc5895  frc5913  frc5988  frc6090  frc6352  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5.508    2.323    5.769    8.513    6.579    3.026    6.655    4.308  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc6420  frc6672  frc6823  frc6865  frc7018  frc8576  frc9007  frc9008  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   6.318    9.653    7.938    5.626    4.449    5.666    4.753    2.593  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9022  frc9075  frc9076  frc9125  frc9244  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4.533    4.615    3.120    5.277    2.484  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">fit_event_lr</span><span class="op">(</span><span class="st">"2024new"</span>, match_type <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = response ~ 0 + ., data = design, weights = w)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   frc58    frc59    frc85   frc111   frc254   frc294   frc316   frc359  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  26.011   40.587   30.573   43.172   56.308   27.875   37.089   46.319  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc369   frc610   frc836   frc888  frc1025  frc1156  frc1189  frc1323  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  10.669   29.237   32.563   27.552   31.032   40.863   41.112   64.116  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc1629  frc1778  frc1792  frc1797  frc1880  frc1891  frc2341  frc2767  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  33.711   55.671   16.254   21.707   20.534   14.520   19.361   46.402  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc2910  frc2974  frc3008  frc3015  frc3196  frc3339  frc3354  frc3414  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  54.008   48.840   19.395   30.398   21.033   38.486   12.276   46.992  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3472  frc3473  frc3476  frc3478  frc3504  frc3506  frc3620  frc3663  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   6.311   19.373   27.046   51.659   27.902   40.040   39.811   44.557  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc3937  frc4039  frc4130  frc4329  frc4392  frc4607  frc4779  frc5024  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  37.577   39.740   31.057   28.289   31.590   42.402   36.676   32.460  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc5472  frc5614  frc5804  frc5914  frc5933  frc5985  frc6014  frc6191  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  42.417   38.603   44.248    8.751   23.696    9.832   17.325   -1.855  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc6366  frc6429  frc6443  frc6919  frc7111  frc7565  frc7605  frc7748  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  34.426   23.870   40.211   36.882   14.887   21.569   13.303    4.219  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc8048  frc8393  frc8780  frc9098  frc9401  frc9475  frc9477  frc9495  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  28.228   18.542    8.624   36.115   44.144   11.493   12.009   11.057  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> frc9602  frc9609  frc9613  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   6.727   36.274    6.870  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">fit_event_lr</span><span class="op">(</span><span class="st">"2024paca"</span>, response <span class="op">=</span> <span class="st">"foulPoints"</span>, flip_response_alliance <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula = response ~ 0 + ., data = design, weights = w)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   frc117    frc144    frc325    frc340    frc379    frc578    frc677    frc695  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -0.07866  -0.26968   3.03721   2.97982   0.53536   3.23848  -0.43398   2.24065  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc1126   frc1559   frc1708   frc1787   frc2013   frc2053   frc2172   frc2228  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3.98934   1.85517  -1.40523  -1.91714   1.39115   1.21372   0.23473   2.76690  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc2252   frc2399   frc2614   frc2638   frc2641   frc2656   frc3015   frc3181  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.81981   1.70962  -0.42900   1.14738   2.47890  -0.17572  -2.19345   1.90455  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc3201   frc3260   frc3484   frc3492   frc3504   frc3954   frc4027   frc4050  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.13200  -1.54401   1.76614   0.56782   0.43775   1.63516  -1.37627   2.42047  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc4121   frc4145   frc4150   frc4611   frc4991   frc5413   frc5740   frc6834  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.76563   1.69059  -0.55735  -1.75418   0.81411   3.34038   2.18137   3.69759  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc7274   frc7515   frc8096   frc8393   frc8705   frc9004   frc9022   frc9139  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1.73416   0.83289   1.30827  -0.80325   0.40470   2.51817   0.14655   2.15096  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  frc9415   frc9475  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.34034   3.95450  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriel Krotkov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

